<div class="container py-5">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="text-tamu-maroon fw-bold">Your Referral Posts</h2>
    <%= link_to "New Referral Post", new_referral_post_path, class: "tamu-btn tamu-btn-maroon text-decoration-none" %>
  </div>

  <% @referral_posts.each do |post| %>
    <div class="card shadow-sm mb-3">
      <div class="card-body">
        <h5 class="card-title"><%= post.title %></h5>
        <h6 class="card-subtitle mb-2 text-muted"><%= post.company_name %></h6>
        <p class="card-text">Posted by: <%= post.user.full_name %></p>

        <% request = post.referral_requests.find_by(user: current_user) %>
        <% if request %>
          <span class="badge bg-secondary"><%= request.status.capitalize %></span>
        <% elsif post.user != current_user && post.active? %>
          <%= button_to "Request Referral", referral_post_referral_requests_path(post), method: :post, class: "tamu-btn tamu-btn-maroon btn-sm" %>
        <% end %>
      </div>
    </div>
  <% end %>
</div>